<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dorm Availability - AAU Dorm Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <div class="top-bar">
            <div class="container">
                <div class="university-info">
                    <img src="assets/images/aau logo 1.jpg"
                         alt="AAU Logo" class="logo">
                    <div class="university-name">
                        <h1>ADDIS ABABA UNIVERSITY</h1>
                        <p class="university-subtitle">Dormitory Availability</p>
                    </div>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="dorm-availability.html" class="active"><i class="fas fa-bed"></i> Dorm Availability</a></li>
                        <li><a href="apply.html"><i class="fas fa-edit"></i> Apply for Dorm</a></li>
                        <li><a href="admin.html"><i class="fas fa-user-shield"></i> Admin</a></li>
                        <li><a href="status.html"><i class="fas fa-search"></i> Check Status</a></li>
                        <li><a href="waiting-list.html"><i class="fas fa-list"></i> Waiting List</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <h1 class="section-title">Dormitory Availability Status</h1>
        
        <!-- Search and Filter Section -->
        <div class="search-box">
            <div class="search-form">
                <input type="text" class="search-input" placeholder="Search by dorm number or floor...">
                <select class="form-input">
                    <option value="">All Floors</option>
                    <option value="0">Ground Floor (000-040)</option>
                    <option value="1">1st Floor (100-140)</option>
                    <option value="2">2nd Floor (200-240)</option>
                    <option value="3">3rd Floor (300-340)</option>
                    <option value="4">4th Floor (400-440)</option>
                </select>
                <select class="form-input">
                    <option value="">All Status</option>
                    <option value="available">Available</option>
                    <option value="full">Full</option>
                    <option value="maintenance">Under Maintenance</option>
                </select>
                <button class="search-btn"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>

        <!-- Real-time Availability Table -->
        <div class="table-container">
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Dorm Number</th>
                            <th>Floor</th>
                            <th>Capacity</th>
                            <th>Available Beds</th>
                            <th>Occupancy Rate</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="availabilityTable">
                        <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Floor-wise Breakdown -->
        <div class="cards-grid">
            <div class="info-card">
                <h3><i class="fas fa-layer-group"></i> Ground Floor</h3>
                <p><strong>Range:</strong> Dorm 000-040</p>
                <p><strong>Total Beds:</strong> 240</p>
                <p><strong>Available:</strong> 18 beds</p>
                <p><strong>Occupancy:</strong> 92.5%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 92.5%"></div>
                </div>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-layer-group"></i> 1st Floor</h3>
                <p><strong>Range:</strong> Dorm 100-140</p>
                <p><strong>Total Beds:</strong> 240</p>
                <p><strong>Available:</strong> 12 beds</p>
                <p><strong>Occupancy:</strong> 95%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 95%"></div>
                </div>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-layer-group"></i> 2nd Floor</h3>
                <p><strong>Range:</strong> Dorm 200-240</p>
                <p><strong>Total Beds:</strong> 240</p>
                <p><strong>Available:</strong> 32 beds</p>
                <p><strong>Occupancy:</strong> 86.7%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 86.7%"></div>
                </div>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-layer-group"></i> 3rd Floor</h3>
                <p><strong>Range:</strong> Dorm 300-340</p>
                <p><strong>Total Beds:</strong> 240</p>
                <p><strong>Available:</strong> 9 beds</p>
                <p><strong>Occupancy:</strong> 96.3%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 96.3%"></div>
                </div>
            </div>
            <div class="info-card">
                <h3><i class="fas fa-layer-group"></i> 4th Floor</h3>
                <p><strong>Range:</strong> Dorm 400-440</p>
                <p><strong>Total Beds:</strong> 240</p>
                <p><strong>Available:</strong> 48 beds</p>
                <p><strong>Occupancy:</strong> 80%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 80%"></div>
                </div>
            </div>
        </div>

        <!-- Legend -->
        <div class="info-card">
            <h3>Status Legend</h3>
            <div style="display: flex; gap: 20px; margin-top: 15px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: #28a745; border-radius: 3px;"></div>
                    <span>Available (3+ beds)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: #ffc107; border-radius: 3px;"></div>
                    <span>Limited (1-2 beds)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: #dc3545; border-radius: 3px;"></div>
                    <span>Full</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: #6c757d; border-radius: 3px;"></div>
                    <span>Maintenance</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Addis Ababa University</h3>
                    <p>Dormitory Management System</p>
                    <p>Simplifying student accommodation since 2025</p>
                </div>
                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 6 Kilo, Addis Ababa</p>
                    <p><i class="fas fa-phone"></i> +251 11 123 4567</p>
                    <p><i class="fas fa-envelope"></i> dorm@aau.edu.et</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <a href="index.html">Home</a>
                    <a href="apply.html">Apply</a>
                    <a href="status.html">Check Status</a>
                    <a href="admin.html">Admin Login</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Addis Ababa University. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Sample data for availability table
        const availabilityData = [
            { dorm: "012", floor: "Ground", capacity: 6, available: 3, status: "Available" },
            { dorm: "015", floor: "Ground", capacity: 6, available: 0, status: "Full" },
            { dorm: "018", floor: "Ground", capacity: 6, available: 2, status: "Limited" },
            { dorm: "025", floor: "Ground", capacity: 6, available: 6, status: "Available" },
            { dorm: "112", floor: "1st", capacity: 6, available: 1, status: "Limited" },
            { dorm: "115", floor: "1st", capacity: 6, available: 0, status: "Full" },
            { dorm: "118", floor: "1st", capacity: 6, available: 0, status: "Maintenance" },
            { dorm: "212", floor: "2nd", capacity: 6, available: 4, status: "Available" },
            { dorm: "215", floor: "2nd", capacity: 6, available: 0, status: "Full" },
            { dorm: "218", floor: "2nd", capacity: 6, available: 6, status: "Available" },
            { dorm: "312", floor: "3rd", capacity: 6, available: 0, status: "Full" },
            { dorm: "315", floor: "3rd", capacity: 6, available: 1, status: "Limited" },
            { dorm: "318", floor: "3rd", capacity: 6, available: 0, status: "Full" },
            { dorm: "412", floor: "4th", capacity: 6, available: 5, status: "Available" },
            { dorm: "415", floor: "4th", capacity: 6, available: 6, status: "Available" },
            { dorm: "418", floor: "4th", capacity: 6, available: 0, status: "Full" }
        ];

        function populateAvailabilityTable() {
            const tableBody = document.getElementById('availabilityTable');
            if (!tableBody) return;
            
            tableBody.innerHTML = '';

            availabilityData.forEach(item => {
                const occupancyRate = ((item.capacity - item.available) / item.capacity * 100).toFixed(1);
                let statusClass = '';
                
                switch(item.status) {
                    case 'Available': statusClass = 'status-available'; break;
                    case 'Full': statusClass = 'status-full'; break;
                    case 'Limited': statusClass = 'status-waiting'; break;
                    case 'Maintenance': statusClass = 'status-full'; break;
                }
                const row = 
                    <tr>
                        <td><strong>${item.dorm}</strong></td>
                        <td>${item.floor}</td>
                        <td>${item.capacity} beds</td>
                        <td>${item.available} beds</td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${occupancyRate}%"></div>
                            </div>
                            ${occupancyRate}%
                        </td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                        <td>
                            ${item.available > 0 ? 
                                <a href="apply.html?dorm=${item.dorm}" class="btn btn-primary" style="padding: 5px 15px; font-size: 14px;">Apply</a> : 
                                <button class="btn btn-secondary" style="padding: 5px 15px; font-size: 14px;" disabled>Full</button>
                            }
                        </td>
                    </tr>
                ;
                tableBody.innerHTML += row;
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            populateAvailabilityTable();
            
            // Add search functionality
            const searchInput = document.querySelector('.search-input');
            const floorSelect = document.querySelector('select.form-input');
            const statusSelect = document.querySelectorAll('select.form-input')[1];
            const searchBtn = document.querySelector('.search-btn');
            
            function filterTable() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedFloor = floorSelect.value;
                const selectedStatus = statusSelect.value;
                
                const rows = document.querySelectorAll('#availabilityTable tr');
                
                rows.forEach(row => {
                    const dormText = row.children[0].textContent.toLowerCase();
                    const floorText = row.children[1].textContent.toLowerCase();
                    const statusText = row.children[5].textContent.toLowerCase();
                    
                    let showRow = true;
                    
                    // Filter by search term
                    if (searchTerm && !dormText.includes(searchTerm)) {
                        showRow = false;
                    }
                    
                    // Filter by floor
                    if (selectedFloor) {
                        const floorMap = {
                            '0': 'ground',
                            '1': '1st',
                            '2': '2nd', 
                            '3': '3rd',
                            '4': '4th'
                        };
                        if (floorText !== floorMap[selectedFloor]) {
                            showRow = false;
                        }
                    }
                    
                    // Filter by status
                    if (selectedStatus) {
                        const statusMap = {
                            'available': 'available',
                            'full': 'full',
                            'maintenance': 'maintenance'
                        };
                        if (statusText !== statusMap[selectedStatus]) {
                            showRow = false;
                        }
                    }
                    
                    row.style.display = showRow ? '' : 'none';
                });
            }
            
            if (searchBtn) {
                searchBtn.addEventListener('click', filterTable);
                }
            
            if (searchInput) {
                searchInput.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        filterTable();
                    }
                });
            }
            
            if (floorSelect) {
                floorSelect.addEventListener('change', filterTable);
            }
            
            if (statusSelect) {
                statusSelect.addEventListener('change', filterTable);
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>